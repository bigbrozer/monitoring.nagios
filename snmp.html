


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>SNMP based plugin &mdash; monitoring.nagios 1.3.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'',
        VERSION:'1.3.0',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
    <script type="text/javascript">
        jQuery(function () {
            SphinxRtdTheme.StickyNav.enable();
        });
    </script>
  

  
    <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  
    <link rel="top" title="monitoring.nagios 1.3.0 documentation" href="index.html"/>
        <link rel="next" title="SSH based plugin" href="ssh.html"/>
        <link rel="prev" title="Creating a new plugin, the basics" href="new_plugin.html"/> 

  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="icon icon-home"> monitoring.nagios</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="new_plugin.html">Creating a new plugin, the basics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="new_plugin.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="new_plugin.html#basic-intialization">Basic intialization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="new_plugin.html#logging">Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="new_plugin.html#defining-new-arguments">Defining new arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="new_plugin.html#sanity-checks-on-arguments">Sanity checks on arguments</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="new_plugin.html#output-to-nagios">Output to Nagios</a><ul>
<li class="toctree-l3"><a class="reference internal" href="new_plugin.html#preparation">Preparation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="new_plugin.html#plugin-template">Plugin template</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">SNMP based plugin</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting started</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ssh.html">SSH based plugin</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ssh.html#getting-started">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="ssh.html#default-plugin-arguments">Default plugin arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="ssh.html#remote-actions">Remote actions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ssh.html#get-a-command-output">Get a command output</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssh.html#get-a-list-of-files-in-a-directory">Get a list of files in a directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssh.html#get-file-or-directory-last-modified-time">Get file or directory last modified time</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="wmi.html">WMI based plugin</a><ul>
<li class="toctree-l2"><a class="reference internal" href="wmi.html#getting-started">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="wmi.html#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="http.html">HTTP based plugin</a><ul>
<li class="toctree-l2"><a class="reference internal" href="http.html#getting-started">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="http.html#default-plugin-arguments">Default plugin arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="http.html#making-requests">Making requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="http.html#playing-with-response">Playing with response</a><ul>
<li class="toctree-l3"><a class="reference internal" href="http.html#response-content">Response content</a></li>
<li class="toctree-l3"><a class="reference internal" href="http.html#json-output">JSON output</a></li>
<li class="toctree-l3"><a class="reference internal" href="http.html#xml-output">XML output</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="plugin-api.html">Plugin API reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="plugin-api.html#base-class">Base class</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-api.html#network-protocols">Network protocols</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-api.html#databases">Databases</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="probe-api.html">Probes API reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="probe-api.html#base-class">Base class</a></li>
<li class="toctree-l3"><a class="reference internal" href="probe-api.html#network-protocols">Network protocols</a></li>
<li class="toctree-l3"><a class="reference internal" href="probe-api.html#databases">Databases</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="arguments.html">Arguments types</a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities.html">Utilities</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="index.html">monitoring.nagios</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>SNMP based plugin</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/snmp.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="snmp-based-plugin">
<h1>SNMP based plugin<a class="headerlink" href="#snmp-based-plugin" title="Permalink to this headline">¶</a></h1>
<p>The class <a class="reference internal" href="plugin-api.html#monitoring.nagios.plugin.NagiosPluginSNMP" title="monitoring.nagios.plugin.NagiosPluginSNMP"><tt class="xref py py-class docutils literal"><span class="pre">NagiosPluginSNMP</span></tt></a> that inherits from <a class="reference internal" href="plugin-api.html#monitoring.nagios.plugin.NagiosPlugin" title="monitoring.nagios.plugin.NagiosPlugin"><tt class="xref py py-class docutils literal"><span class="pre">NagiosPlugin</span></tt></a> is
responsible to init a plugin based on SNMP.</p>
<p>She will provides new attributes and methods in order to query a host using
SNMP.</p>
<p>If you show the help with <tt class="docutils literal"><span class="pre">--help</span></tt>, you will see extra arguments provided by
the class. It uses the same mechanics as we saw in <a class="reference internal" href="new_plugin.html"><em>Creating a new plugin, the basics</em></a> section. It
overrides <a class="reference internal" href="plugin-api.html#monitoring.nagios.plugin.NagiosPlugin.define_plugin_arguments" title="monitoring.nagios.plugin.NagiosPlugin.define_plugin_arguments"><tt class="xref py py-meth docutils literal"><span class="pre">NagiosPlugin.define_plugin_arguments()</span></tt></a> to define new arguments
and <a class="reference internal" href="plugin-api.html#monitoring.nagios.plugin.NagiosPlugin.verify_plugin_arguments" title="monitoring.nagios.plugin.NagiosPlugin.verify_plugin_arguments"><tt class="xref py py-meth docutils literal"><span class="pre">NagiosPlugin.verify_plugin_arguments()</span></tt></a> to do arguments checking.</p>
<div class="section" id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">monitoring.nagios.plugin</span> <span class="kn">import</span> <span class="n">NagiosPluginSNMP</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s">&#39;plugin&#39;</span><span class="p">)</span>

<span class="n">oids</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;descr&#39;</span><span class="p">:</span> <span class="s">&#39;1.3.6.1.2.1.1.1.0&#39;</span><span class="p">,</span>
    <span class="s">&#39;contact&#39;</span><span class="p">:</span> <span class="s">&#39;1.3.6.1.2.1.1.4.0&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">plugin</span> <span class="o">=</span> <span class="n">NagiosPluginSNMP</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&quot;Get the system description and contact&quot;</span><span class="p">)</span>
<span class="n">snmpquery</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">.</span><span class="n">snmp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">oids</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;Descr: &quot;</span><span class="p">,</span> <span class="n">snmpquery</span><span class="p">[</span><span class="s">&#39;descr&#39;</span><span class="p">]</span>
<span class="k">print</span> <span class="s">&quot;Contact: &quot;</span><span class="p">,</span> <span class="n">snmpquery</span><span class="p">[</span><span class="s">&#39;contact&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p><tt class="xref py py-data docutils literal"><span class="pre">plugin</span></tt> is a <a class="reference internal" href="plugin-api.html#monitoring.nagios.plugin.NagiosPluginSNMP" title="monitoring.nagios.plugin.NagiosPluginSNMP"><tt class="xref py py-class docutils literal"><span class="pre">NagiosPluginSNMP</span></tt></a> instance.</p>
<dl class="attribute">
<dt id="monitoring.nagios.plugin.NagiosPluginSNMP.snmp">
<tt class="descclassname">NagiosPluginSNMP.</tt><tt class="descname">snmp</tt><a class="headerlink" href="#monitoring.nagios.plugin.NagiosPluginSNMP.snmp" title="Permalink to this definition">¶</a></dt>
<dd><p>Instance of <tt class="xref py py-class docutils literal"><span class="pre">ProbeSNMP</span></tt>. Use <tt class="xref py py-meth docutils literal"><span class="pre">get()</span></tt> and pass it a dict with
a name for your OID as the key and the OID string as the value. You can
check for many OIDs as you want, just add their names and the OID string
to the dict.</p>
</dd></dl>

<p>The <tt class="xref py py-meth docutils literal"><span class="pre">get()</span></tt> method returns a dict represented by <tt class="xref py py-data docutils literal"><span class="pre">snmpquery</span></tt> with key as the name
you defined and as the value it will be the result of the SNMP get query. For
example here, the value of OID SysDescr (1.3.6.1.2.1.1.1) is available with
<tt class="docutils literal"><span class="pre">snmpquery['descr']</span></tt>.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ssh.html" class="btn btn-neutral float-right" title="SSH based plugin"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="new_plugin.html" class="btn btn-neutral" title="Creating a new plugin, the basics"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Vincent BESANCON.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>